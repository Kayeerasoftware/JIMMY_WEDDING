<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jimmy & Joster Wedding Budget</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f8f1f5, #fff1f7);
      color: #2d1b4e;
      padding-top: 120px; /* Offset for fixed header */
    }
    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
    }
    .category-card {
      transition: all 0.3s ease;
    }
    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    .fade-in {
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .slide {
      flex: 0 0 100%;
    }
    .heart-pulse {
      animation: heartPulse 2s infinite;
    }
    @keyframes heartPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
/* General Styling */
.fixed-button {
  position: fixed;
  top: 120px;
  right: 20px;
  z-index: 1001; /* Above header */
}
.pledge-counter {
  position: fixed;
  top: 70px;
  right: 20px;
  z-index: 1001; /* Above header */
  background: #ffffff;
  color: #2d1b4e;
  padding: 8px 12px;
  border-radius: 9999px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  font-size: 0.9rem;
  font-weight: 600;
}
.modal-overlay {
  position: fixed;
  top: 200px; /* Default for larger screens */
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.5);
  display: none;
  align-items: flex-start;
  justify-content: center;
  z-index: 999;
  padding-top: 1rem;
}

@media (max-width: 480px) {
  .modal-overlay {
    top: 110px; /* Adjust to match mobile header height */
  }
}
.modal-overlay.visible {
  display: flex;
}
.modal-content {
  background: white;
  padding: 2rem;
  border-radius: 0.5rem;
  max-width: 90%;
  max-height: calc(100vh - 200px); /* Adjust for header and padding */
  overflow-y: auto;
  position: relative;
}
header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background: linear-gradient(to right, #6b21a8, #db2777);
  color: white;
  text-align: center;
  padding: 1.5rem;
}
.slider-container {
  margin-top: 120px; /* Offset to start below fixed header */
}

/* Media Queries for Responsiveness */

/* Small Screen Devices (phones) */
@media (max-width: 480px) {
  .fixed-button {
    top: 90px; /* Adjust position for smaller screen */
    right: 15px;
  }

  .pledge-counter {
    top: 50px; /* Adjust top position */
    font-size: 0.8rem; /* Smaller font size */
    padding: 6px 10px; /* Reduce padding */
  }

  .modal-overlay {
    top: 150px; /* Adjust top to make modal accessible */
  }

  header {
    padding: 1rem; /* Smaller padding for header */
  }

  .slider-container {
    margin-top: 80px; /* Reduce margin for smaller screens */
  }
}

/* Larger Screen Devices (tablets, etc.) */
@media (min-width: 481px) and (max-width: 768px) {
  .fixed-button {
    top: 100px;
    right: 20px;
  }

  .pledge-counter {
    top: 60px;
    font-size: 0.85rem;
    padding: 7px 11px;
  }

  .modal-overlay {
    top: 180px;
  }

  header {
    padding: 1.2rem;
  }

  .slider-container {
    margin-top: 100px;
  }
}

  </style>
</head>
<body class="min-h-screen">
  <!-- Fixed Header -->
  <header>
    <h1 class="text-4xl md:text-5xl font-bold mb-2">Jimmy & Joster's Wedding</h1>
    <p class="text-lg md:text-xl">July 5th, 2025</p>
    <p class="mt-4 text-sm animate-pulse">Thank you for supporting our journey of love ðŸ’–</p>
  </header>

  <!-- Fixed Button for Your Pledges -->
  <button id="togglePledgesBtn" class="fixed-button bg-purple-700 text-white px-4 py-2 rounded-lg hover:bg-purple-800 transition duration-300">
    Your Pledges
  </button>
  <!-- Pledge Counter -->
  <div id="pledgeCounter" class="pledge-counter">Pledges: 0</div>

  <!-- Slider -->
  <div class="slider-container max-w-6xl mx-auto my-8 overflow-hidden rounded-lg shadow-lg">
    <div class="slides flex transition-transform duration-500">
      <img src="Jimmy1-min.jpg" alt="You are really missing" class="slide w-full h-96 object-cover">
      <video src="Jimmy1-vid.mp4" muted autoplay loop class="slide w-full h-96 object-cover"></video>
      <img src="Jimmy4-min.jpg" alt="You are really missing" class="slide w-full h-96 object-cover">
      <img src="Jimmy3-min.jpg" alt="You are really missing" class="slide w-full h-96 object-cover">
      <img src="Jimmy6-min.jpg" alt="You are really missing" class="slide w-full h-96 object-cover">
      <img src="Jimmy5-min.jpg" alt="You are really missing" class="slide w-full h-96 object-cover">
      <img src="Jimmy2-min.jpg" alt="You are really missing" class="slide w-full h-96 object-cover">
      <img src="Jimmy7-min.jpeg" alt="You are really missing" class="slide w-full h-96 object-cover">
    </div>
  </div>

  <!-- Your Pledges Modal -->
  <div id="pledgesModal" class="modal-overlay">
    <div class="modal-content max-w-6xl">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-purple-700">Your Pledges</h2>
        <p >(Your can edit Item, Qty	and Unit Cost)</p>
        <button id="closePledgesBtn" class="text-red-500 text-2xl">Ã—</button>
      </div>
      <table class="w-full text-left border-collapse bg-white rounded-lg shadow-lg">
        <thead>
          <tr class="bg-purple-700 text-white">
            <th class="p-4">No</th>
            <th class="p-4">Item</th>
            <th class="p-4">Qty</th>
            <th class="p-4">Unit Cost</th>
            <th class="p-4">Amount</th>
            <th class="p-4">Status</th>
            <th class="p-4">Action</th>
          </tr>
        </thead>
        <tbody id="selectedItemsBody"></tbody>
        <tfoot>
          <tr class="bg-purple-100 font-bold">
            <td colspan="4" class="p-4">Total Amount</td>
            <td id="totalAmount" class="p-4">0</td>
            <td colspan="2" class="p-4"></td>
          </tr>
        </tfoot>
      </table>
      <div class="text-center mt-8">
        <button id="toggleFormBtn" class="bg-pink-500 text-white px-6 py-3 rounded-lg hover:bg-pink-600 transition duration-300">
          Submit Your Pledge
        </button>
      </div>
    </div>
  </div>

  <!-- Form Modal -->
  <div id="formModal" class="modal-overlay">
    <div class="modal-content max-w-3xl">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-purple-700">Submit Your Pledge</h2>
        <button id="closeFormBtn" class="text-red-500 text-2xl">Ã—</button>
      </div>
      <form id="weddingForm" class="bg-white p-8 rounded-lg shadow-lg">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="firstName" class="block text-sm font-medium mb-2">First Name</label>
            <input type="text" id="firstName" name="firstName" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" required>
          </div>
          <div>
            <label for="lastName" class="block text-sm font-medium mb-2">Last Name</label>
            <input type="text" id="lastName" name="lastName" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" required>
          </div>
        </div>
        <div class="mb-6">
          <label for="email" class="block text-sm font-medium mb-2">Email</label>
          <input type="email" id="email" name="email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" required>
        </div>
        <div class="mb-6">
          <label for="phone" class="block text-sm font-medium mb-2">Phone</label>
          <input type="tel" id="phone" name="phone" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" required>
        </div>
        <div class="mb-6">
          <label for="location" class="block text-sm font-medium mb-2">Location</label>
          <input type="text" id="location" name="location" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" required>
        </div>
        <div class="mb-6">
          <label for="totalSelections" class="block text-sm font-medium mb-2">Total (UGX)</label>
          <input type="text" id="totalSelections" name="totalSelections" class="w-full p-3 border rounded-lg bg-gray-100" readonly value="0">
        </div>
        <div class="mb-6">
          <label for="comment" class="block text-sm font-medium mb-2">Comment</label>
          <textarea id="comment" name="comment" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" rows="4"></textarea>
        </div>
        <button type="submit" class="w-full bg-purple-700 text-white p-3 rounded-lg hover:bg-purple-800 transition duration-300">Submit Pledge</button>
      </form>
    </div>
  </div>

<!-- Budget Section -->
<section class="max-w-6xl mx-auto px-4 tight-section">
  <h2 class="text-3xl font-bold text-center tight-heading fade-in">Pledge Your Support</h2>
  <p class="text-center tight-subheading text-gray-600">Click on a category to view items and pledge your contribution</p>
  <div id="categories" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</section>

<!-- Contact Section -->
<section class="text-center tight-section">
  <p class="text-lg">Contact Jimmy Agaba: <a href="tel:+256785441332" class="text-purple-700 hover:underline">+256 785 441 332</a></p>
  <p class="text-lg">___ Or___  Nabanoba Jenny - Kampala: <a href="tel:+256785441332" class="text-purple-700 hover:underline">+256 785 441 332</a></p>
</section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white text-center py-6">
    <p>Â© 2025 Kayeera Nathan @ Software. All rights reserved.</p>
  </footer>

  <script>
    // Data for categories and items
    const categoriesData = [
      { name: "Church", id: "church", items: [
        { item: "Church Fees", qty: "Lps", unitCost: 220000, amount: 220000 },
        { item: "Choir", qty: "Lps", unitCost: 250000, amount: 250000 },
        { item: "Rings", qty: "Lps", unitCost: 200000, amount: 200000 },
        { item: "Decoration", qty: "Lps", unitCost: 100000, amount: 100000 },
        { item: "Order of Mass", qty: "Lps", unitCost: 300000, amount: 300000 },
      ]},
      { name: "Groom", id: "groom", items: [
        { item: "Suit y' Omu", qty: "1", unitCost: 500000, amount: 500000 },
        { item: "Changing", qty: "1", unitCost: 200000, amount: 200000 },
        { item: "Shoes", qty: "2", unitCost: 100000, amount: 200000 },
        { item: "Salon", qty: "Lps", unitCost: 20000, amount: 20000 },
        { item: "Stockings", qty: "Lps", unitCost: 50000, amount: 50000 },
        { item: "Neck ties", qty: "Lps", unitCost: 40000, amount: 40000 },
        { item: "Handkerchiefs", qty: "Lps", unitCost: 20000, amount: 20000 },
      ]},
      { name: "Best Man", id: "bestman", items: [
        { item: "Suit for Best Man", qty: "Lps", unitCost: 400000, amount: 400000 },
        { item: "Changing", qty: "Lps", unitCost: 200000, amount: 200000 },
        { item: "Shoes", qty: "Lps", unitCost: 200000, amount: 200000 },
        { item: "Salon", qty: "Lps", unitCost: 10000, amount: 10000 },
      ]},
      { name: "Entourage", id: "entourage", items: [
        { item: "Suits", qty: "6", unitCost: 400000, amount: 2400000 },
        { item: "Shoes", qty: "6", unitCost: 150000, amount: 900000 },
        { item: "Salon", qty: "6", unitCost: 6666.67, amount: 40000 },
      ]},
      { name: "Bride", id: "metron1", items: [
        { item: "Wedding gown", qty: "1", unitCost: 1000000, amount: 1000000 },
        { item: "Changing", qty: "1", unitCost: 500000, amount: 500000 },
        { item: "Shoes", qty: "1", unitCost: 200000, amount: 200000 },
        { item: "Salon", qty: "Lps", unitCost: 800000, amount: 800000 },
        { item: "Handkerchiefs", qty: "Lps", unitCost: 20000, amount: 20000 },
        { item: "Necklace", qty: "1", unitCost: 100000, amount: 100000 },
        { item: "Hand bag", qty: "1", unitCost: 100000, amount: 100000 },
      ]},
      { name: "Matron", id: "metron2", items: [
        { item: "Wedding dress", qty: "1", unitCost: 500000, amount: 500000 },
        { item: "Changing", qty: "1", unitCost: 200000, amount: 200000 },
        { item: "Shoes", qty: "1", unitCost: 100000, amount: 100000 },
      ]},
      { name: "Bride's Maid", id: "bridesmaid", items: [
        { item: "Wedding dress", qty: "1", unitCost: 400000, amount: 400000 },
        { item: "Changing", qty: "1", unitCost: 200000, amount: 200000 },
        { item: "Shoes", qty: "1", unitCost: 100000, amount: 100000 },
        { item: "Salon", qty: "1", unitCost: 300000, amount: 300000 },
        { item: "Peg boy and flower girl", qty: "2", unitCost: 100000, amount: 200000 },
      ]},
      { name: "Reception", id: "reception", items: [
        { item: "Tents", qty: "8", unitCost: 100000, amount: 800000 },
        { item: "Decoration", qty: "1", unitCost: 6500000, amount: 6500000 },
        { item: "Sound System", qty: "1", unitCost: 1000000, amount: 1000000 },
        { item: "Band", qty: "1", unitCost: 500000, amount: 500000 },
        { item: "Video Coverage", qty: "1", unitCost: 4000000, amount: 4000000 },
        { item: "Master of Ceremony", qty: "1", unitCost: 500000, amount: 500000 },
        { item: "Security", qty: "1", unitCost: 300000, amount: 300000 },
        { item: "Cake", qty: "1", unitCost: 1000000, amount: 1000000 },
        { item: "Water tank", qty: "1", unitCost: 300000, amount: 300000 },
        { item: "Catering services", qty: "1", unitCost: 600000, amount: 600000 },
      ]},
      { name: "Food", id: "food", items: [
        { item: "Rice", qty: "200 kg", unitCost: 4000, amount: 800000 },
        { item: "Matooke", qty: "40", unitCost: 25000, amount: 1000000 },
        { item: "Yams", qty: "Lps", unitCost: 120000, amount: 120000 },
        { item: "Irish", qty: "1 sack", unitCost: 420000, amount: 420000 },
        { item: "Kalo", qty: "Lps", unitCost: 160000, amount: 160000 },
        { item: "Chapatti", qty: "Lps", unitCost: 200000, amount: 200000 },
      ]},
      { name: "Sauce", id: "sauce", items: [
        { item: "Meat/Beef", qty: "200 kgs", unitCost: 15000, amount: 3000000 },
        { item: "Chicken", qty: "30", unitCost: 25000, amount: 750000 },
        { item: "Beans", qty: "40 kgs", unitCost: 3000, amount: 120000 },
        { item: "G.Nuts", qty: "10", unitCost: 8000, amount: 80000 },
        { item: "Greens", qty: "Lps", unitCost: 50000, amount: 50000 },
        { item: "Cow peas", qty: "Lps", unitCost: 60000, amount: 60000 },
      ]},
      { name: "Spices", id: "spices", items: [
        { item: "Tomato", qty: "3", unitCost: 50000, amount: 150000 },
        { item: "Carrots", qty: "Lps", unitCost: 30000, amount: 30000 },
        { item: "Onions", qty: "Lps", unitCost: 100000, amount: 100000 },
        { item: "Salt", qty: "Lps", unitCost: 10000, amount: 10000 },
        { item: "Cooking Oil", qty: "40 Ltrs", unitCost: 7000, amount: 280000 },
        { item: "Garlic", qty: "Lps", unitCost: 30000, amount: 30000 },
        { item: "Others", qty: "Lps", unitCost: 400000, amount: 400000 },
        { item: "Tea leaves", qty: "Lps", unitCost: 10000, amount: 10000 },
      ]},
      { name: "Ebyokoseza", id: "ebyokoseza", items: [
        { item: "Firewood", qty: "Lps", unitCost: 400000, amount: 400000 },
        { item: "Transport", qty: "Lps", unitCost: 2500000, amount: 2500000 },
        { item: "Soap", qty: "1 box", unitCost: 60000, amount: 60000 },
        { item: "Sugar", qty: "10 kgs", unitCost: 5000, amount: 50000 },
        { item: "Water", qty: "30 cartons", unitCost: 11000, amount: 330000 },
        { item: "Soda", qty: "30 crates", unitCost: 20000, amount: 600000 },
        { item: "Communication", qty: "1", unitCost: 200000, amount: 200000 },
        { item: "Invitation cards", qty: "200", unitCost: 1000, amount: 200000 },
        { item: "Entertainment", qty: "Lps", unitCost: 500000, amount: 500000 },
        { item: "Miscellaneous", qty: "Lps", unitCost: 1000000, amount: 1000000 },
      ]},
    ];

    let selectedItems = [];

    // Populate categories
    function populateCategories() {
      const container = document.getElementById('categories');
      categoriesData.forEach((category, index) => {
        const card = document.createElement('div');
        card.className = 'category-card bg-white p-6 rounded-lg shadow-md cursor-pointer fade-in';
        card.style.animationDelay = `${index * 0.1}s`;
        card.innerHTML = `
          <h3 class="text-xl font-bold text-purple-700 mb-4">${category.name}</h3>
          <button class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition duration-300">View Items</button>
        `;
        card.onclick = () => showItems(category);
        container.appendChild(card);
      });
    }

    // Show items in a modal-like overlay
    function showItems(category) {
      const overlay = document.createElement('div');
      overlay.className = 'modal-overlay visible';
      overlay.innerHTML = `
        <div class="modal-content max-w-4xl">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-purple-700">${category.name}</h2>
            <button class="text-red-500 text-2xl">Ã—</button>
          </div>
          <table class="w-full text-left border-collapse">
            <thead>
              <tr class="bg-purple-100">
                <th class="p-3">Item</th>
                <th class="p-3">Quantity</th>
                <th class="p-3">Unit Cost</th>
                <th class="p-3">Amount</th>
                <th class="p-3">Action</th>
              </tr>
            </thead>
            <tbody>
              ${category.items.map(item => `
                <tr class="border-b">
                  <td class="p-3">${item.item}</td>
                  <td class="p-3">${item.qty}</td>
                  <td class="p-3">${item.unitCost.toLocaleString()}</td>
                  <td class="p-3">${item.amount.toLocaleString()}</td>
                  <td class="p-3">
                    <button class="pledge-btn bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition duration-300" onclick="addToSelectedItems('${item.item}', '${item.qty}', ${item.unitCost}, ${item.amount}, this)">Pledge</button>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `;
      overlay.querySelector('button').onclick = () => overlay.remove();
      document.body.appendChild(overlay);
    }

    // Update pledge counter
    function updatePledgeCounter() {
      const counter = document.getElementById('pledgeCounter');
      counter.textContent = `Pledges: ${selectedItems.length}`;
    }

    // Toggle pledges modal
    function togglePledgesModal() {
      const modal = document.getElementById('pledgesModal');
      modal.classList.toggle('visible');
      // Close form modal if open
      document.getElementById('formModal').classList.remove('visible');
    }

    // Toggle form modal
    function toggleFormModal() {
      const modal = document.getElementById('formModal');
      modal.classList.toggle('visible');
      // Ensure pledges modal is open
      document.getElementById('pledgesModal').classList.add('visible');
    }

    // Close modals
    function closePledgesModal() {
      document.getElementById('pledgesModal').classList.remove('visible');
    }

    function closeFormModal() {
      document.getElementById('formModal').classList.remove('visible');
    }

    // Add to selected items
    window.addToSelectedItems = function(item, qty, unitCost, amount, button) {
      if (selectedItems.some(i => i.item === item && i.qty === qty)) return;
      selectedItems.push({ item, qty, unitCost, amount, status: 'Pledged' });
      updateSelectedItemsTable();
      updatePledgeCounter();
      // Change button color to green
      button.classList.remove('bg-red-500', 'hover:bg-red-600');
      button.classList.add('bg-green-500', 'hover:bg-green-600');
    };

    // Remove item
    window.removeItem = function(index) {
      selectedItems.splice(index, 1);
      updateSelectedItemsTable();
      updatePledgeCounter();
    };

    // Update item
    window.updateItem = function(index, field, value) {
      selectedItems[index][field] = field === 'unitCost' ? parseFloat(value) || 0 : value;
      updateSelectedItemsTable();
    };

    // Update status color
    function updateStatusColor(select) {
      select.className = `p-2 rounded-lg ${select.value === 'Cleared' ? 'bg-green-500 text-white' : 'bg-yellow-500 text-black'}`;
    }

    // Update selected items table
    function updateSelectedItemsTable() {
      const tbody = document.getElementById('selectedItemsBody');
      tbody.innerHTML = selectedItems.map((item, index) => {
        const isLps = item.qty === 'Lps';
        const calculatedAmount = isLps ? item.unitCost : (parseFloat(item.qty) || 1) * item.unitCost;
        item.amount = calculatedAmount;
        return `
          <tr class="border-b">
            <td class="p-4">${index + 1}</td>
            <td class="p-4"><input class="w-full p-2 border rounded-lg" type="text" value="${item.item}" oninput="updateItem(${index}, 'item', this.value)"></td>
            <td class="p-4"><input class="w-full p-2 border rounded-lg" type="text" value="${item.qty}" oninput="updateItem(${index}, 'qty', this.value)"></td>
            <td class="p-4"><input class="w-full p-2 border rounded-lg" type="number" value="${item.unitCost}" oninput="updateItem(${index}, 'unitCost', this.value)"></td>
            <td class="p-4">${calculatedAmount.toLocaleString()}</td>
            <td class="p-4">
              <select class="p-2 rounded-lg" onchange="updateItem(${index}, 'status', this.value); updateStatusColor(this)">
                <option value="Cleared" ${item.status === 'Cleared' ? 'selected' : ''}>Cleared</option>
                <option value="Pledged" ${item.status === 'Pledged' ? 'selected' : ''}>Pledged</option>
              </select>
            </td>
            <td class="p-4">
              <button class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition duration-300" onclick="removeItem(${index})">Remove</button>
            </td>
          </tr>
        `;
      }).join('');

      document.querySelectorAll('select').forEach(updateStatusColor);
      updateTotalSelections();
    }

    // Update total selections
    function updateTotalSelections() {
      const total = selectedItems.reduce((sum, item) => {
        const isLps = item.qty === 'Lps';
        return sum + (isLps ? item.unitCost : (parseFloat(item.qty) || 1) * item.unitCost);
      }, 0);
      document.getElementById('totalAmount').textContent = total.toLocaleString();
      document.getElementById('totalSelections').value = total.toLocaleString();
    }

    // Form submission
    document.getElementById('weddingForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const fields = ['firstName', 'lastName', 'email', 'phone', 'location'];
      let isValid = true;

      fields.forEach(field => {
        const input = document.getElementById(field);
        if (!input.value.trim()) {
          input.classList.add('border-red-500');
          isValid = false;
        } else {
          input.classList.remove('border-red-500');
          input.classList.add('border-green-500');
        }
      });

      const email = document.getElementById('email');
      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailPattern.test(email.value)) {
        email.classList.add('border-red-500');
        isValid = false;
      }

      const phone = document.getElementById('phone');
      const phonePattern = /^\+?\d{10,14}$/;
      if (!phonePattern.test(phone.value)) {
        phone.classList.add('border-red-500');
        isValid = false;
      }

      if (selectedItems.length === 0) {
        alert('Please select at least one item before submitting.');
        isValid = false;
      }

      if (isValid) {
        const formData = new FormData();
        formData.append('firstName', document.getElementById('firstName').value);
        formData.append('lastName', document.getElementById('lastName').value);
        formData.append('email', document.getElementById('email').value);
        formData.append('phone', document.getElementById('phone').value);
        formData.append('location', document.getElementById('location').value);
        formData.append('totalSelections', document.getElementById('totalSelections').value);
        formData.append('comment', document.getElementById('comment').value);
        formData.append('selectedItems', JSON.stringify(selectedItems));

        try {
          const response = await fetch('https://script.google.com/macros/s/AKfycbz8crr3bKTNMyude69r4Yzm1E77ke657EaO3pvHNFy-91lqav-GPuKx7DrPgS3gKQct/exec', {
            method: 'POST',
            body: formData,
            mode: 'cors'
          });
          const result = await response.json();
          if (result.result === 'success') {
            alert('Thank you for supporting Agaba Jimmy! Your pledge has been sent. Total Budget Selected: ' + document.getElementById('totalSelections').value + ' UGX');
            document.getElementById('weddingForm').reset();
            fields.forEach(field => document.getElementById(field).classList.remove('border-green-500'));
            selectedItems = [];
            updateSelectedItemsTable();
            updatePledgeCounter();
            closeFormModal();
            closePledgesModal();
          } else {
            alert('Error submitting form: ' + result.error);
          }
        } catch (error) {
          alert('Error submitting form: ' + error.message);
        }
      } else {
        alert('Please fill all required fields and select at least one item.');
      }
    });

    // Slider
    let slideIndex = 0;
    function showSlides() {
      try {
        const slides = document.querySelector('.slides');
        const totalSlides = document.querySelectorAll('.slides > *').length;
        slideIndex = (slideIndex + 1) % totalSlides;
        slides.style.transform = `translateX(-${slideIndex * 100}%)`;
      } catch (error) {
        console.error('Slider error:', error);
      }
    }

    // Initialize
    populateCategories();
    setInterval(showSlides, 5000);

    // Event listeners
    document.getElementById('togglePledgesBtn').addEventListener('click', togglePledgesModal);
    document.getElementById('toggleFormBtn').addEventListener('click', toggleFormModal);
    document.getElementById('closePledgesBtn').addEventListener('click', closePledgesModal);
    document.getElementById('closeFormBtn').addEventListener('click', closeFormModal);

    // Initial pledge counter update
    updatePledgeCounter();
  </script>
</body>
</html>
